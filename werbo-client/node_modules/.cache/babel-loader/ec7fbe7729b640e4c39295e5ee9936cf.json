{"ast":null,"code":"import _classCallCheck from \"/Users/selinamli/Projects/werbo/werbo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/selinamli/Projects/werbo/werbo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/selinamli/Projects/werbo/werbo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/selinamli/Projects/werbo/werbo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/selinamli/Projects/werbo/werbo-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/selinamli/Projects/werbo/werbo-client/src/components/pages/Court.js\";\nimport React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { Link } from \"react-router-dom\";\nvar socket = socketIOClient(\"http://127.0.0.1:4000\");\n\nvar Court =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Court, _Component);\n\n  function Court(props) {\n    var _this;\n\n    _classCallCheck(this, Court);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Court).call(this, props));\n\n    _this.getCourtInfo = function () {\n      fetch(\"http://localhost:4000/court/\" + _this.props.match.params.access_code).catch(function (err) {\n        return console.error(err);\n      }).then(function (results) {\n        return results.json();\n      }).then(function (results) {\n        _this.setState({\n          team1_score: results.data[0].team1\n        });\n\n        _this.setState({\n          team2_score: results.data[0].team2\n        });\n      });\n    };\n\n    _this.updateScore = function (team, operation) {\n      fetch(\"http://localhost:4000/court/update\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          access_code: _this.state.access_code,\n          team_number: team,\n          operation: operation\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      });\n    };\n\n    _this.leaveSocketRoom = function () {\n      socket.emit(\"LeaveCourt\", _this.state.access_code);\n    };\n\n    _this.state = {\n      access_code: \"\",\n      team1_score: 0,\n      team2_score: 0\n    };\n    return _this;\n  }\n\n  _createClass(Court, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //join a specific socket channel belonging to the access_code\n      socket.emit(\"JoinCourt\", this.props.match.params.access_code);\n      socket.on(\"Refresh\", function () {\n        _this2.getCourtInfo();\n      });\n      this.setState({\n        access_code: this.props.match.params.access_code\n      });\n      this.getCourtInfo();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this3 = this;\n\n      window.onpopstate = function (e) {\n        _this3.leaveSocketRoom();\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \" Court \"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \" Team 1: \", this.state.team1_score), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this4.updateScore(1, \"increase\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"+\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this4.updateScore(1, \"decrease\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"-\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \" Team 2: \", this.state.team2_score), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this4.updateScore(2, \"increase\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"+\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this4.updateScore(2, \"decrease\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"-\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: \"/\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.leaveSocketRoom,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Leave\"))));\n    }\n  }]);\n\n  return Court;\n}(Component);\n\nexport default Court;","map":{"version":3,"sources":["/Users/selinamli/Projects/werbo/werbo-client/src/components/pages/Court.js"],"names":["React","Component","socketIOClient","Link","socket","Court","props","getCourtInfo","fetch","match","params","access_code","catch","err","console","error","then","results","json","setState","team1_score","data","team1","team2_score","team2","updateScore","team","operation","method","body","JSON","stringify","state","team_number","headers","leaveSocketRoom","emit","on","window","onpopstate","e","pathname"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport { Link } from \"react-router-dom\";\n\nconst socket = socketIOClient(\"http://127.0.0.1:4000\");\n\nclass Court extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taccess_code: \"\",\n\t\t\tteam1_score: 0,\n\t\t\tteam2_score: 0\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\t//join a specific socket channel belonging to the access_code\n\t\tsocket.emit(\"JoinCourt\", this.props.match.params.access_code);\n\t\tsocket.on(\"Refresh\", () => {\n\t\t\tthis.getCourtInfo();\n\t\t});\n\n\t\tthis.setState({ access_code: this.props.match.params.access_code });\n\t\tthis.getCourtInfo();\n\t}\n\n\tcomponentDidUpdate() {\n\t\twindow.onpopstate = e => {\n\t\t\tthis.leaveSocketRoom();\n\t\t};\n\t}\n\n\tgetCourtInfo = () => {\n\t\tfetch(\n\t\t\t\"http://localhost:4000/court/\" + this.props.match.params.access_code\n\t\t)\n\t\t\t.catch(err => console.error(err))\n\t\t\t.then(results => {\n\t\t\t\treturn results.json();\n\t\t\t})\n\t\t\t.then(results => {\n\t\t\t\tthis.setState({ team1_score: results.data[0].team1 });\n\t\t\t\tthis.setState({ team2_score: results.data[0].team2 });\n\t\t\t});\n\t};\n\n\tupdateScore = (team, operation) => {\n\t\tfetch(\"http://localhost:4000/court/update\", {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify({\n\t\t\t\taccess_code: this.state.access_code,\n\t\t\t\tteam_number: team,\n\t\t\t\toperation: operation\n\t\t\t}),\n\t\t\theaders: { \"Content-Type\": \"application/json\" }\n\t\t});\n\t};\n\n\tleaveSocketRoom = () => {\n\t\tsocket.emit(\"LeaveCourt\", this.state.access_code);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<h1> Court </h1>\n\t\t\t\t<div>\n\t\t\t\t\t<p> Team 1: {this.state.team1_score}</p>\n\t\t\t\t\t<button onClick={() => this.updateScore(1, \"increase\")}>\n\t\t\t\t\t\t+\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => this.updateScore(1, \"decrease\")}>\n\t\t\t\t\t\t-\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<p> Team 2: {this.state.team2_score}</p>\n\t\t\t\t\t<button onClick={() => this.updateScore(2, \"increase\")}>\n\t\t\t\t\t\t+\n\t\t\t\t\t</button>\n\t\t\t\t\t<button onClick={() => this.updateScore(2, \"decrease\")}>\n\t\t\t\t\t\t-\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\tpathname: \"/\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<button onClick={this.leaveSocketRoom}>Leave</button>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Court;\n"]},"metadata":{},"sourceType":"module"}